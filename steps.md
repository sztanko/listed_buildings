1. Create the Codespaces environment: add `.devcontainer/Dockerfile` based on `mcr.microsoft.com/devcontainers/base:ubuntu` that installs `software-properties-common`, `gdal-bin`, `libgdal-dev`, `build-essential`, `curl`, `nodejs` (LTS via Nodesource), and `tippecanoe`; then add `.devcontainer/devcontainer.json` that sets `"postCreateCommand"` to create a Python venv and `pip install -r requirements.txt`, and configures the integrated terminal to source `.venv/bin/activate`. Open the repo in Codespaces to verify `gdalinfo --version` and `tippecanoe --version` work.

2. Set up Python dependencies and structure: add `requirements.txt` with `typer==0.12.*`, `geopandas==1.0.*`, `shapely==2.0.*`, `pyproj==3.6.*`, `pandas==2.2.*`, `pyogrio==0.9.*`, `fiona==1.9.*`, `loguru==0.7.*`; create folders `src/`, `src/__init__.py`, `src/logging_cfg.py`, `src/io_utils.py`, `src/geom_ops.py`, `src/tiler.py`, and `src/cli.py`; also create a `build/` (gitignored) for intermediates and ensure `data/listed_buildings.csv` exists.

3. Implement logging and utilities: in `src/logging_cfg.py` set up Loguru for structured stdout logging; in `src/io_utils.py` write helpers to read the CSV into a GeoDataFrame using either lon/lat or easting/northing with a configurable `--src-crs`, normalize column names (lowercase, underscores), drop invalid geometries, and write out GeoParquet/GeoJSON; ensure all functions accept a logger instance and raise clean errors.

4. Implement geometry pipeline: in `src/geom_ops.py` write functions to (a) reproject points to a metric CRS (default `EPSG:3857`), (b) buffer all points by a configurable `buffer` in meters, (c) dissolve via `unary_union`, (d) optionally apply a `negative_buffer` shrink, (e) explode multipart geometries to parts, (f) compute polygon area in square meters, and (g) filter by `min_area` (default 1000); return a GeoDataFrame with an `id` and `area_m2` attribute and writers to GeoParquet/GeoJSON.

5. Implement tiling helpers: in `src/tiler.py` add functions that shell out to `tippecanoe` to build `.mbtiles` for points (`listed_buildings`) and polygons (`hotspots`) with tunable `--min-zoom`, `--max-zoom`, `--drop-densest-as-needed`, and attribute preservation (`-y`/`-pC`); then convert `.mbtiles` to `.pmtiles` using the `pmtiles` CLI if available or, if not, just output `.mbtiles` (the web app will support both but prefer `.pmtiles`); ensure outputs land in `docs/tiles/`.

6. Wire the Typer CLI: in `src/cli.py` create an `app = typer.Typer(pretty_exceptions_enable=False)` with commands `ingest`, `hotspots`, and `package`; `ingest` reads CSV and writes `build/listed_buildings.geojson` and `.parquet`; `hotspots` reads points, runs the buffer→union→optional negative buffer→area filter pipeline, and writes `build/hotspots.geojson` and `.parquet`; `package` calls the tiler to produce `docs/tiles/listed_buildings.pmtiles` and `docs/tiles/hotspots.pmtiles`, logging counts, bounds, and file sizes.

7. Add the web app scaffold: create `docs/index.html` with mobile meta tags, a full-viewport `#map` container, and script tags for MapLibre GL JS and the `pmtiles` JS library (CDN); include `docs/styles.css`, `docs/config.js`, and `docs/app.js`; in `config.js` export `window.MAP_CONFIG` with `styleUrl: 'https://demotiles.maplibre.org/style.json'`, initial `center` and `zoom`, and `tiles` paths pointing to `./tiles/*.pmtiles`.

8. Implement the map logic: in `docs/app.js` initialize the MapLibre map using `MAP_CONFIG.styleUrl`; register the `pmtiles` protocol (`maplibregl.addProtocol('pmtiles', ...)`) and add two vector sources for `hotspots` and `listed_buildings` using `pmtiles://` URLs; add a fill layer for hotspots with a subtle outline and hover highlight, and a circle layer for points with radius scaling by zoom; implement `map.on('click', 'listed-buildings-layer', ...)` to open a popup that iterates over all feature properties and renders a key–value table; add simple UI controls (layer toggles + “Fit to data”) in a top-right card.

9. Make the app responsive and legible: in `docs/styles.css` make `html, body, #map` full height/width, style popups with larger fonts and wrapped text for mobile, increase touch targets for UI buttons, and ensure the control card has high contrast and shadow; test in Codespaces forwarded port with `npx http-server docs -p 8080 -c-1`.

10. Add automation for repeatability: create a `Makefile` with targets `env` (create venv and install deps), `ingest`, `hotspots` (with defaults `--buffer 200 --negative-buffer 0 --min-area 1000`), `package`, `build` (runs ingest→hotspots→package), `serve` (static server), and `clean`; confirm `make build` produces `docs/tiles/*.pmtiles` and that the map loads them locally.

11. Run the full pipeline once: in Codespaces, run `make env && make build && make serve`, open the preview to confirm basemap renders, hotspots polygons draw, and points appear; click a few points to verify popups show all attributes; adjust default styling (e.g., pale fill and small circle radii) to ensure good readability.

12. Publish to GitHub Pages: commit everything to `main` (including `docs` outputs) with conventional commits, push, and in repo Settings → Pages set the source to `Deploy from a branch: main /docs`; after Pages builds, open the public URL and confirm the map works with PMTiles over HTTPS; if tiles don’t load, verify case-sensitive paths and MIME types (fallback to `.mbtiles` only if necessary).

13. Expose customization knobs: document, in `README.md`, the CLI flags for `hotspots` (buffer, negative buffer, min-area, proj-crs), the basemap override via `docs/config.js` (optionally switching to a MapTiler light style with an API key), and how to re-run `make build` after tweaking parameters; include an example command showing negative buffer usage to better fit building footprints.

14. Add a simple GitHub Action: create `.github/workflows/build.yml` that runs on pushes to `main`, sets up Python and GDAL (ubuntu-latest), installs Tippecanoe, executes `make build`, and commits updated `docs/tiles/*.pmtiles` back to `main` (using `actions/checkout` with `persist-credentials: true`); otherwise, keep it manual for this one-evening build.
